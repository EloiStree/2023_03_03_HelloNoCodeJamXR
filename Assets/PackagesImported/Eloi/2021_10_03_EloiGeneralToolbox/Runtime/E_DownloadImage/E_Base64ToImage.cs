using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;
using UnityEngine;

namespace Eloi { 
public static class E_Base64ToImage
{
    public static void  ConvertBase64StringToImage(string basestr, out bool converted, out Texture2D found)
    {
        Texture2D t2d = new Texture2D(2, 2);
        try
        {
            byte[] arr = Convert.FromBase64String(basestr);
            t2d.LoadImage(arr);
            converted = true;
        }
        catch (Exception ex)
        {
            t2d = null;
            converted = false;
        }
        found= t2d;
    }

        public static void OpenB64InBrowser(string b64Image)
        {
            string path = Application.temporaryCachePath + "/OpenB64Image.html";
            string image = "<body><image src=\"" + b64Image + "\"/> </body>";
            File.WriteAllText(path, image);
            Application.OpenURL(path);
        }

        public static void ConvertBase64WithHeaderStringToImage(string data, out bool converted, out Texture2D found)
    { 

        converted= false;
        found = null;
        if (data.IndexOf("data:image/") == 0)
        {
            //data:image/png;
            //data:image/jpeg;
            //data:image/png;base64,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
            //data:image/jpeg;base64,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
            int indexOfB64 = data.IndexOf("base64,");
            if (indexOfB64 > -1)
            {
                try
                {
                    string d = data.Substring(indexOfB64 + "base64,".Length);
                    E_Base64ToImage.ConvertBase64StringToImage(d, out converted, out found);
                }
                catch (Exception ) { }
            }
        }
    }

    public static bool IsDataBased(string url)
    {
        return url.IndexOf("data:image/") == 0;
    }

    public enum SupportedImageTypeB64 { PNG, JPEG}
    public static void ConvertTextureToBase64(Texture2D texture, SupportedImageTypeB64 convertion, out bool converted, out string data64, out string dataWithMeta) {
        converted = false;
        data64 = "";
        dataWithMeta = "";
        try
        {
            if (convertion == SupportedImageTypeB64.PNG)
            {
                data64 = Convert.ToBase64String(texture.EncodeToPNG());
                dataWithMeta = "data:image/png;base64," + data64;
                converted = true;
            }
            if (convertion == SupportedImageTypeB64.JPEG)
            {
                data64 = Convert.ToBase64String(texture.EncodeToJPG());
                dataWithMeta = "data:image/jpeg;base64," + data64;
                converted = true;
            }
        }
        catch (Exception e) {
                Debug.LogWarning("E:" + e.StackTrace);
            }
    }

    public static void TryBase64StringToImage(string text, out bool converted, out Texture2D imageFound)
    {
        if (IsDataBased(text))
        {
            ConvertBase64WithHeaderStringToImage(text, out converted, out imageFound);
        }
        else {
            ConvertBase64StringToImage(text, out converted, out imageFound);
        }
    }
}
}
